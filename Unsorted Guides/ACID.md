### ACID — Принципы Транзакций в Базах Данных

ACID — это набор свойств, гарантирующих надёжность транзакций в базах данных. Они помогают обеспечить целостность данных, особенно при сбоях системы или параллельном выполнении транзакций. Расшифровка ACID:

1. **Atomicity (Атомарность)**:
   - Атомарность гарантирует, что транзакция либо полностью выполняется, либо полностью откатывается. Если одна часть транзакции завершается с ошибкой, все изменения, сделанные в рамках этой транзакции, будут отменены.
   
   **Пример:**
   ```java
   @Transactional
   public void transferMoney(Account fromAccount, Account toAccount, BigDecimal amount) {
       fromAccount.debit(amount);
       toAccount.credit(amount);
       // Если возникнет ошибка на любом из шагов, операция будет откатана
   }
   ```

2. **Consistency (Согласованность)**:
   - После завершения транзакции система должна находиться в согласованном состоянии. Это означает, что после выполнения транзакции все правила и ограничения (например, уникальные ключи или внешние ключи) должны быть соблюдены.
   
   **Пример:**
   ```java
   @Transactional
   public void createOrder(Order order) {
       validateStock(order);
       orderRepository.save(order);
       // После выполнения транзакции система остаётся в согласованном состоянии
   }
   ```

3. **Isolation (Изоляция)**:
   - Изоляция обеспечивает независимость параллельно выполняемых транзакций, предотвращая их влияние друг на друга. Это позволяет избежать проблем, таких как "грязное чтение" (когда одна транзакция видит незавершённые изменения другой).
   
   **Пример:**
   ```java
   @Transactional(isolation = Isolation.SERIALIZABLE)
   public void updateProductQuantity(Product product, int newQuantity) {
       product.setQuantity(newQuantity);
       productRepository.save(product);
       // Обновление будет выполнено так, что другие транзакции не увидят незавершённые изменения
   }
   ```

4. **Durability (Долговечность)**:
   - Долговечность гарантирует, что после фиксации транзакции её результаты сохранятся, даже в случае сбоя системы. Например, если транзакция завершена успешно и данные были зафиксированы, они будут сохранены в базе данных даже после перезагрузки сервера.
   
   **Пример:**
   ```java
   @Transactional
   public void saveTransactionLog(TransactionLog log) {
       transactionLogRepository.save(log);
       // После фиксации данные будут надёжно сохранены в базе данных
   }
   ```

### Заключение:
- **Atomicity**: Транзакции либо выполняются полностью, либо откатываются.
- **Consistency**: После транзакции данные остаются в согласованном состоянии.
- **Isolation**: Параллельные транзакции не должны влиять друг на друга.
- **Durability**: После успешного завершения транзакции её изменения сохраняются, даже если система выходит из строя.

---

### Тэги:
#ACID #Транзакции #Atomicity #Consistency #Isolation #Durability #Java #Spring